!function(t){"use strict";var o=t.fn.bootstrapTable.utils.sprintf,e={showAutoRefresh:!1,autoRefreshInterval:1};t.extend(t.fn.bootstrapTable.defaults,e),t.extend(t.fn.bootstrapTable.defaults.icons,{autoRefresh:"fa fa-refresh"}),t.extend(t.fn.bootstrapTable.locales,{formatAutoRefresh:function(){return"自动刷新"}}),t.extend(t.fn.bootstrapTable.defaults,t.fn.bootstrapTable.locales);var n=t.fn.bootstrapTable.Constructor,s=n.prototype.initToolbar;n.prototype.initToolbar=function(){if(s.apply(this,Array.prototype.slice.apply(arguments)),this.options.showAutoRefresh){var e=this,n=this.$toolbar.find(">.btn-group"),i=n.find("div.auto-refresh");if(!i.length){i=t(['<div class="auto-refresh btn-group">','<button class="btn'+o(" btn-%s",this.options.buttonsClass)+o(" btn-%s",this.options.iconSize)+' dropdown-toggle"title="'+this.options.formatAutoRefresh()+'" data-toggle="dropdown">',o('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.autoRefresh),'<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu" data-stop-propagation="true">',"</ul>","</div>"].join("")).appendTo(n);var r=i.find(".dropdown-menu");if(r.append(["<li>",'<div class="switchery-box" title="开启此功能, 将自动定时刷新表格">',"<span>自动刷新</span>&nbsp;&nbsp;",'<input class="switchery auto-refresh-switch" type="checkbox"',"",">","</div>","</li>",'<li class="time-box" ','style="display: none"',">",'<div class="touch-spin-box">','<div class="form-group">',"<span>刷新时间（秒）</span>",'<input class="touch-spin refresh-interval" type="text">',"</div>","</li>"].join("")),"function"==typeof Switchery?new Switchery(document.querySelector(".auto-refresh .switchery"),{size:"small"}):console.error("未引入abpetkov/switchery.js, 请检查代码."),"function"==typeof t.fn.TouchSpin){var a=t("input.refresh-interval");a.TouchSpin({min:1,max:3600,step:1,initval:e.options.autoRefreshInterval,buttondown_class:"btn btn-info",buttonup_class:"btn btn-info"}),a.on("change",function(){e.options.autoRefreshInterval=parseInt(t(this).val()),e.refresh(),f()}),t(".refresh-interval").on("keydown",function(o){13==o.keyCode&&t(this).blur(),o.stopImmediatePropagation()})}else console.error("未引入istvan-ujjmeszaros/bootstrap-touchspin.js, 请检查代码.");var p,l=function(){p&&clearInterval(p)},f=function(){l(),p=setInterval(function(){e.refresh()},1e3*e.options.autoRefreshInterval)};r.find(".time-box > span").eq(0).on("click",function(){t(".auto-refresh-switch").trigger("click")}),r.find(".auto-refresh-switch").on("change",function(){var o=t(this);o.get(0).checked?(o.parents("ul").find(".time-box").slideDown(),e.refresh(),f()):(o.parents("ul").find(".time-box").slideUp(),l())}),t("body").on("click","[data-stop-propagation]",function(t){t.stopImmediatePropagation()})}}}}(jQuery);